<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Mermaid demo</title>
</head>
<body>
  <h2>Mermaid illustration</h2>

  <pre class="mermaid">
graph TD
    %% External Data Source
    API[Crypto Exchange API<br/>Real-time Price Feed]
    
    %% Thread 1: Market Data
    subgraph T1[Thread 1: Market Data]
        MD[Market Data Thread]
        PRICE_DATA[Real-time Price Data<br/>BTC: $50000<br/>ETH: $3000]
        PQ[Price Queue<br/>+ Mutex + CV]
    end
    
    %% Thread 2: Strategy Engine
    subgraph T2[Thread 2: Strategy Engine]
        ST[Strategy Thread]
        ALGO[Action Algorithm]
        SIGNAL[Action Signal<br/>BUY/SELL Decision]
        SQ[Signal Queue<br/>+ Mutex + CV]
    end
    
    %% Thread 3: Order Execution
    subgraph T3[Thread 3: Order Execution]
        EX[Execution Thread]
        ORDER[Order Operations<br/>Buy <br/>Sell ]
    end
    
    %% Connections
    API --> MD
    MD --> PRICE_DATA
    PRICE_DATA --> PQ
    ST --> ALGO
    ALGO --> SIGNAL
    SIGNAL --> SQ
    EX --> ORDER
    
    %% Notification flows
    PQ -.->|notify_one| ST
    SQ -.->|notify_one| EX
    
    %% Styling
    classDef threadBox fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef dataBox fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef actionBox fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    
    class MD,ST,EX threadBox
    class PQ,SQ,PRICE_DATA,SIGNAL dataBox
    class ALGO,ORDER,API actionBox
  </pre>

  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>
</body>
</html>
